{
  "name": "lua",
  "extension": ".lua",
  "comment_single": "--",
  "comment_multi_start": "--[[",
  "comment_multi_end": "]]",
  "indent": "    ",
  "statement_end": "",
  "block_start": "",
  "block_end": "end",
  
  "templates": {
    "program_header": "-- Generated by Omni Compiler\n\n",
    "program_footer": "",
    
    "fn_decl": "function {name}({params})\n{body}\nend",
    "fn_local": "local function {name}({params})\n{body}\nend",
    "fn_anonymous": "function({params})\n{body}\nend",
    
    "let_decl": "local {name} = {value}",
    "global_decl": "{name} = {value}",
    
    "if_stmt": "if {condition} then\n{consequence}\nend",
    "if_else_stmt": "if {condition} then\n{consequence}\nelse\n{alternative}\nend",
    "elseif_stmt": "elseif {condition} then\n{consequence}",
    "while_stmt": "while {condition} do\n{body}\nend",
    "for_numeric": "for {var} = {start}, {end} do\n{body}\nend",
    "for_pairs": "for {key}, {value} in pairs({table}) do\n{body}\nend",
    "for_ipairs": "for {index}, {value} in ipairs({array}) do\n{body}\nend",
    "repeat_until": "repeat\n{body}\nuntil {condition}",
    
    "return_stmt": "return {value}",
    "return_multi": "return {values}",
    
    "table_class": "{name} = {{}}\n{name}.__index = {name}\n\nfunction {name}:new({params})\n    local self = setmetatable({{}}, {name})\n{body}\n    return self\nend",
    "method_decl": "function {class}:{name}({params})\n{body}\nend",
    "field_assign": "self.{name} = {value}",
    
    "call_expr": "{callee}({args})",
    "method_call": "{object}:{method}({args})",
    "member_access": "{object}.{member}",
    "index_access": "{object}[{index}]",
    "new_expr": "{class}:new({args})",
    
    "binary_expr": "{left} {op} {right}",
    "unary_expr": "{op}{operand}",
    "ternary_expr": "{condition} and {then} or {else}",
    "assignment": "{left} = {right}",
    "multi_assign": "local {names} = {values}",
    
    "table_literal": "{{{pairs}}}",
    "table_pair": "{key} = {value}",
    "table_pair_string": "[\"{key}\"] = {value}",
    "array_literal": "{{{elements}}}",
    
    "string_literal": "\"{value}\"",
    "string_multiline": "[[{value}]]",
    "number_literal": "{value}",
    "bool_true": "true",
    "bool_false": "false",
    "null": "nil",
    
    "require_stmt": "local {alias} = require(\"{module}\")",
    "module_return": "return {name}",
    
    "comment": "-- {text}",
    "comment_multi": "--[[\n{text}\n]]",
    
    "pcall": "local {ok}, {result} = pcall({func}, {args})",
    "error_stmt": "error({message})",
    
    "concat": "{left} .. {right}",
    "length": "#{expr}"
  },
  
  "type_map": {
    "i8": "number",
    "i16": "number",
    "i32": "number",
    "i64": "number",
    "u8": "number",
    "u16": "number",
    "u32": "number",
    "u64": "number",
    "f32": "number",
    "f64": "number",
    "string": "string",
    "bool": "boolean",
    "void": "nil",
    "any": "any"
  },
  
  "operators": {
    "add": "+",
    "sub": "-",
    "mul": "*",
    "div": "/",
    "mod": "%",
    "pow": "^",
    "eq": "==",
    "neq": "~=",
    "lt": "<",
    "lte": "<=",
    "gt": ">",
    "gte": ">=",
    "and": "and",
    "or": "or",
    "not": "not ",
    "concat": "..",
    "len": "#"
  }
}
