// Minimal test with nested if-else inside native block

struct Test {
    provider: string,
    full_url: string
}

fn parse_test() -> Test {
    let pkg = Test {
        provider: "github",
        full_url: ""
    };
    
    native "js" {
        let input = "test";
        
        if (input.startsWith('github:')) {
            pkg.provider = 'github';
        } else if (input.startsWith('gitlab:')) {
            pkg.provider = 'gitlab';
        } else {
            pkg.provider = 'other';
        }
        
        // Second if block
        if (!pkg.full_url) {
            if (pkg.provider === 'github') {
                pkg.full_url = 'https://github.com';
            } else if (pkg.provider === 'gitlab') {
                pkg.full_url = 'https://gitlab.com';
            }
        }
    }
    
    return pkg;
}
